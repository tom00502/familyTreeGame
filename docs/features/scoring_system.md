# 計分系統 (Scoring System)

## 📌 概述

計分系統評估每位玩家在遊戲中的**貢獻度**，並於「大揭曉」階段呈現個人排名與 MVP。

分數來源分為三層：

1. **任務基礎分**：完成任務即得分，依任務類型而異
2. **獎勵加分**：速度、準確性、首次填寫等額外獎勵
3. **扣分機制**：跳過與超時的懲罰

---

## 📊 任務基礎分

各任務類型的基礎分依**對族譜的貢獻程度**遞增排列：

| 任務類型                     | 基礎分 | 說明                                   |
| ---------------------------- | ------ | -------------------------------------- |
| 排序確認 (Age Ordering)      | 0.5 分 | 輔助任務，對結構影響最小               |
| 節點命名 (Node Naming)       | 1 分   | 虛擬節點命名，基本資料填充             |
| 屬性填充 (Attribute Filling) | 1 分   | 補齊性別、生日等屬性                   |
| 向上追溯 (Upward Tracing)    | 1.5 分 | 路徑閉合，連結上一代節點               |
| 節點匯聚 (Node Convergence)  | 2 分   | 確認多路徑匯聚點，對族譜正確性影響最大 |

---

## 🏆 獎勵機制

### 速度獎勵

| 提交時間       | 加分  |
| -------------- | ----- |
| 10 秒內提交    | +5 分 |
| 20 秒內提交    | +3 分 |
| 超過 20 秒提交 | 無    |

### 準確性獎勵

| 情況                   | 加分   |
| ---------------------- | ------ |
| 答案與最終確認結果一致 | +5 分  |
| 衝突解決時選擇正確答案 | +10 分 |

### 首次填寫獎勵

- 第一位填寫某節點資訊的玩家：**+5 分**

### 貢獻度獎勵

- 完成所有派給自己的任務（一次跳過都沒有）：遊戲結束後 **+10 分**

---

## ⬇️ 扣分機制

### 跳過懲罰

- 每次主動跳過任務：**-2 分**
- 玩家可以無限次跳過，**無冷卻限制**
- 跳過後任務重新進入派發佇列，優先級降低（詳見任務派發策略）

### 超時懲罰

- 玩家獲派任務後 30 秒無任何動作，系統自動作為跳過處理：**-2 分**

---

## 🧮 最終分數計算

```
Final Score = Σ(任務基礎分) + 速度獎勵 + 準確性獎勵 + 首次填寫獎勵 + 貢獻度獎勵 - 跳過懲罰
```

---

## 🥇 排名與 MVP

- 遊戲結束時，依 Final Score 高低排列玩家名次
- **MVP = 得分最高的玩家**，顯示於「大揭曉」階段的族譜呈現畫面
- 同分時以**完成任務總數**為優先，再以**最後提交時間**為次要條件

---

## 📋 計分相關規格文件

- 任務類型定義 → [qa_phase2_data_filling.md](./qa_phase2_data_filling.md)
- 結算與大揭曉流程 → [qa_phase3_data_check.md](./qa_phase3_data_check.md)
